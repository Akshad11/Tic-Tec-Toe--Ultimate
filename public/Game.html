<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <title>Game</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap');

        body {
            font-family: 'Orbitron', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
            overflow-x: hidden;
        }
    </style>
</head>

<body class="bg-gray-900 flex flex-col lg:flex-row gap-5 justify-center items-center h-[100dvh] w-full p-4">
    <!-- <h1 id="fixedText" class="fixed left-0 top-10 text-white px-4 py-2 text-lg font-bold">

    </h1> -->
    <!-- Left Side: Scores + Board -->
    <div class="flex flex-col gap-6 items-center w-full max-w-lg">

        <!-- Scoreboard -->
        <div class="flex justify-center gap-6 w-full">
            <div class="bg-gray-800 p-4 w-32 rounded-xl text-center">
                <h1 id="player1" class="text-4xl font-bold text-red-500">O</h1>
                <div class="flex justify-between text-white mt-2">
                    <span class="text-xl">You:</span>
                    <span class="text-xl">4</span>
                </div>
            </div>
            <div class="bg-gray-800 p-4 w-32 rounded-xl text-center">
                <h1 id="player2" class="text-4xl font-bold text-green-500">X</h1>
                <div class="flex justify-between text-white mt-2">
                    <span class="text-xl">Opp:</span>
                    <span class="text-xl">4</span>
                </div>
            </div>
        </div>

        <!-- Status -->
        <h1 id="turnDisplay" class="text-3xl lg:text-4xl text-white font-semibold">Your move...</h1>

        <!-- Tic Tac Toe Board -->
        <div class="w-56 h-56 lg:w-72 lg:h-72 grid grid-cols-3 grid-rows-3  rounded-lg overflow-hidden">
            <!-- Row 1 -->
            <div id="sq1" data-index="0" class="border-b-4 cell border-white flex justify-center items-center">
            </div>
            <div id="sq2" data-index="1"
                class="border-b-4 cell border-l-4 border-white flex justify-center items-center">
            </div>
            <div id="sq3" data-index="2"
                class="border-b-4 cell border-l-4 border-white flex justify-center items-center">
            </div>

            <!-- Row 2 -->
            <div id="sq4" data-index="3" class="border-b-4 cell border-white flex justify-center items-center">
            </div>
            <div id="sq5" data-index="4"
                class="border-b-4 cell border-l-4 border-white flex justify-center items-center">
            </div>
            <div id="sq6" data-index="5"
                class="border-b-4 cell border-l-4 border-white flex justify-center items-center">
            </div>

            <!-- Row 3 -->
            <div id="sq7" data-index="6" class="flex cell justify-center items-center">
            </div>
            <div id="sq8" data-index="7" class="border-l-4 cell border-white flex justify-center items-center">
            </div>
            <div id="sq9" data-index="8" class="border-l-4 cell border-white flex justify-center items-center">
            </div>
        </div>

        <!-- Mobile Buttons -->
        <div class="flex gap-6 mt-6 lg:hidden">
            <button id="btnLoss"
                class="w-28 text-xl h-10 bg-blue-500 text-white rounded-lg active:scale-95 active:border-2 border-white">Loss</button>
            <button id="btnExit"
                class="w-28 text-xl h-10 bg-red-500 text-white rounded-lg active:scale-95 active:border-2 border-white">Exit</button>
        </div>
    </div>

    <!-- Desktop Buttons -->
    <div class="hidden lg:flex flex-col gap-6">
        <button
            class="w-28 text-xl h-10 bg-blue-500 text-white rounded-lg active:scale-95 active:border-2 border-white">Loss</button>
        <button
            class="w-28 text-xl h-10 bg-red-500 text-white rounded-lg active:scale-95 active:border-2 border-white">Exit</button>
    </div>
    <div id="winPopup" class="fixed inset-0 bg-black/50 justify-center items-center hidden z-50">
        <div class="bg-white p-6 rounded-xl text-center shadow-lg">
            <h1 class="text-3xl font-bold text-green-600">üéâ You Won! üéâ</h1>
            <p class="mt-2 text-gray-700">Great job, champion!</p>
            <button id="btnRematch" onclick="onRetryClick()"
                class="mt-4 bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                Rematch
            </button>
            <button onclick="closeWinPopup()" class="mt-4 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                Exit Room
            </button>
        </div>
    </div>
    <div id="lossPopup" class="fixed inset-0 bg-black/50  justify-center items-center hidden z-50">
        <div class="bg-white p-6 rounded-xl text-center shadow-lg">
            <h1 class="text-3xl font-bold text-red-600">‚ùå You Lost!</h1>
            <p class="mt-2 text-gray-700">Better luck next time.</p>
            <button id="btnRematch" onclick="onRetryClick()"
                class="mt-4 bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">
                Rematch
            </button>
            <button onclick="closeLossPopup()" class="mt-4 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">
                Exit Room
            </button>
        </div>
    </div>
    <div id="drawPopup" class="fixed inset-0 bg-black/50  justify-center items-center hidden z-50">
        <div class="bg-white p-6 rounded-xl text-center shadow-lg">
            <h1 class="text-3xl font-bold text-yellow-600">ü§ù It's a Draw!</h1>
            <p class="mt-2 text-gray-700">No one wins this time.</p>
            <button id="btnRematch" onclick="onRetryClick()"
                class="mt-4 bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600">
                Rematch
            </button>
            <button onclick="closeDrawPopup()"
                class="mt-4 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600">
                Exit Room
            </button>
        </div>
    </div>
    <div id="waitingPopup" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
        <div id="popuptext"
            class="bg-white px-8 py-6 rounded-xl shadow-lg text-lg font-semibold text-gray-800 text-center">
            Waiting for other player to join...
        </div>
    </div>
    <div id="rematchPopup" class="fixed inset-0 bg-black bg-opacity-70 items-center justify-center z-50 hidden">
        <div class="bg-white px-8 py-6 rounded-xl shadow-lg text-lg font-semibold text-gray-800 text-center space-y-4">
            <p>Opponent wants a rematch</p>

            <div class="flex justify-center space-x-4">
                <button id="acceptRematch"
                    class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow">
                    Accept
                </button>
                <button id="cancelRematch" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg shadow">
                    Cancel
                </button>
            </div>
        </div>
    </div>
    <div id="LeavePopup" class="fixed inset-0 bg-black bg-opacity-70 items-center justify-center z-50 hidden">
        <div class="bg-white px-8 py-6 rounded-xl shadow-lg text-lg font-semibold text-gray-800 text-center space-y-4">
            <p>‚ö†Ô∏è If you leave this game, you will lose by resignation. Are you sure?</p>

            <div class="flex justify-center space-x-4">
                <button id="ReturnToMatch"
                    class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow">
                    Return
                </button>
                <button id="LeaveMatch" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg shadow">
                    Leave
                </button>
            </div>
        </div>
    </div>
    <div id="LossPopup" class="fixed inset-0 bg-black bg-opacity-70 items-center justify-center z-50 hidden">
        <div class="bg-white px-8 py-6 rounded-xl shadow-lg text-lg font-semibold text-gray-800 text-center space-y-4">
            <p>‚ö†Ô∏è If you leave this game, you will lose by resignation. Are you sure?</p>

            <div class="flex justify-center space-x-4">
                <button id="LossReturnToMatch"
                    class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow">
                    Return
                </button>
                <button id="LossMatch" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg shadow">
                    Forfeit
                </button>
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<script src="/config.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/js/shared.js"></script>
<script src="/js/game.js"></script>

</html>